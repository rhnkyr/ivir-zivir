PNL={baseUrl:"",uploadUrl:"",init:function(){PNL.Events.init();PNL.Upload.init()},Events:{init:function(){PNL.Events.confirmDelete();PNL.Events.deleteFile();$(document).on("click","input[aria-required]",function(){$(".dene").trigger("click")});$(".tile").find("img").on("click",function(){for(instance in CKEDITOR.instances){CKEDITOR.instances[instance].updateElement()}$("input[aria-required]").val($(this).attr("src"))})},deleteFile:function(){$(".del").on("click",function(){var a=$(this),b=a.prevAll(":hidden").val();if(confirm("Are you sure?")){$.post(PNL.baseUrl+"deletefile",{url:b},function(c){if(c.result){a.prevAll("img").addClass("dn");a.prevAll("img").attr("src","");a.addClass("dn")}else{alert(c)}},"json")}return false})},confirmDelete:function(){$("a.delete").on("click",function(){if(confirm("Are you sure?")){location.href=$(this).data("href")}return false})}},Upload:{init:function(){PNL.Upload.uploadFile()},uploadFile:function(){$("#file_upload").uploadify({height:30,swf:"/templates/assets/uploadify/uploadify.swf",uploader:"/templates/assets/uploadify/uploadify.php",width:120,buttonText:"Select...",fileTypeExts:"*.jpg;*.bmp;*.png",fileTypeDesc:"Image Files (.jpg,.bmp,.png)",fileSizeLimit:"8MB",multi:false,onUploadError:function(a,d,c,b){alert("The file "+a.name+" could not be uploaded: "+b)},onUploadSuccess:function(c,d,b){$("#ref_image").val(d);var a=$("#uploaded");a.attr("src",PNL.uploadUrl+"templates/uploads/"+d);a.removeClass("dn");$(".del").removeClass("dn")}})}}};$(document).ready(function(){PNL.init()});