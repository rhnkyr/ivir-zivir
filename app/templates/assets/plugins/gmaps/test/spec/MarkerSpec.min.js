describe("Creating a marker",function(){var b,a;beforeEach(function(){b=b||new GMaps({el:"#map-with-markers",lat:-12.0533,lng:-77.0293,zoom:14})});describe("With basic options",function(){beforeEach(function(){a=b.addMarker({lat:-12.0533,lng:-77.0293,title:"New marker"})});it("should add the marker to the markers collection",function(){expect(b.markers.length).toEqual(1);expect(b.markers[0]).toEqual(a)});it("should create a marker with defined position",function(){expect(parseFloat(a.getPosition().lat().toFixed(4))).toEqual(-12.0533);expect(parseFloat(a.getPosition().lng().toFixed(4))).toEqual(-77.0293)})});describe("With events",function(){var c;beforeEach(function(){c={onclick:function(){console.log(this.title)}};spyOn(c,"onclick").andCallThrough();a=b.addMarker({lat:-12.0533,lng:-77.0193,title:"New marker",click:c.onclick})});it("should respond to click event",function(){google.maps.event.trigger(a,"click");expect(c.onclick).toHaveBeenCalled()})})});