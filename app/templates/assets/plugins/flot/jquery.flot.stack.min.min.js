(function(d){var e={series:{stack:null}};function f(a){function c(i,l){var m=null;for(var n=0;n<l.length;++n){if(i==l[n]){break}if(l[n].stack==i.stack){m=l[n]}}return m}function b(U,P,af){if(P.stack==null||P.stack===false){return}var aa=c(P,U.getData());if(!aa){return}var Z=af.pointsize,O=af.points,ae=aa.datapoints.pointsize,m=aa.datapoints.points,T=[],L,N,ad,j,l,W,R=P.lines.show,M=P.bars.horizontal,ab=Z>2&&(M?af.format[2].x:af.format[2].y),ac=R&&P.lines.steps,Q=true,Y=M?1:0,s=M?0:1,S=0,V=0,X,i;while(true){if(S>=O.length){break}X=T.length;if(O[S]==null){for(i=0;i<Z;++i){T.push(O[S+i])}S+=Z}else{if(V>=m.length){if(!R){for(i=0;i<Z;++i){T.push(O[S+i])}}S+=Z}else{if(m[V]==null){for(i=0;i<Z;++i){T.push(null)}Q=true;V+=ae}else{L=O[S+Y];N=O[S+s];j=m[V+Y];l=m[V+s];W=0;if(L==j){for(i=0;i<Z;++i){T.push(O[S+i])}T[X+s]+=l;W=l;S+=Z;V+=ae}else{if(L>j){if(R&&S>0&&O[S-Z]!=null){ad=N+(O[S-Z+s]-N)*(j-L)/(O[S-Z+Y]-L);T.push(j);T.push(ad+l);for(i=2;i<Z;++i){T.push(O[S+i])}W=l}V+=ae}else{if(Q&&R){S+=Z;continue}for(i=0;i<Z;++i){T.push(O[S+i])}if(R&&V>0&&m[V-ae]!=null){W=l+(m[V-ae+s]-l)*(L-j)/(m[V-ae+Y]-j)}T[X+s]+=W;S+=Z}}Q=false;if(X!=T.length&&ab){T[X+2]+=W}}}}if(ac&&X!=T.length&&X>0&&T[X]!=null&&T[X]!=T[X-Z]&&T[X+1]!=T[X-Z+1]){for(i=0;i<Z;++i){T[X+Z+i]=T[X+i]}T[X+1]=T[X-Z+1]}}af.points=T}a.hooks.processDatapoints.push(b)}d.plot.plugins.push({init:f,options:e,name:"stack",version:"1.2"})})(jQuery);