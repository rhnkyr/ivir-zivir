(function(v){var l={xaxis:{timezone:null,timeformat:null,twelveHourClock:false,monthNames:null}};function p(a,b){return b*Math.floor(a/b)}function m(k,d,a,e){if(typeof k.strftime=="function"){return k.strftime(d)}var h=function(x,w){x=""+x;w=""+(w==null?"0":w);return x.length==1?w+x:x};var f=[];var g=false;var i=k.getHours();var y=i<12;if(a==null){a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(e==null){e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}var c;if(i>12){c=i-12}else{if(i==0){c=12}else{c=i}}for(var b=0;b<d.length;++b){var j=d.charAt(b);if(g){switch(j){case"a":j=""+e[k.getDay()];break;case"b":j=""+a[k.getMonth()];break;case"d":j=h(k.getDate());break;case"e":j=h(k.getDate()," ");break;case"h":case"H":j=h(i);break;case"I":j=h(c);break;case"l":j=h(c," ");break;case"m":j=h(k.getMonth()+1);break;case"M":j=h(k.getMinutes());break;case"q":j=""+(Math.floor(k.getMonth()/3)+1);break;case"S":j=h(k.getSeconds());break;case"y":j=h(k.getFullYear()%100);break;case"Y":j=""+k.getFullYear();break;case"p":j=(y)?("am"):("pm");break;case"P":j=(y)?("AM"):("PM");break;case"w":j=""+k.getDay();break}f.push(j);g=false}else{if(j=="%"){g=true}else{f.push(j)}}}return f.join("")}function n(c){function b(g,h,i,f){g[h]=function(){return i[f].apply(i,arguments)}}var e={date:c};if(c.strftime!=undefined){b(e,"strftime",c,"strftime")}b(e,"getTime",c,"getTime");b(e,"setTime",c,"setTime");var a=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"];for(var d=0;d<a.length;d++){b(e,"get"+a[d],c,"getUTC"+a[d]);b(e,"set"+a[d],c,"setUTC"+a[d])}return e}function r(a,b){if(b.timezone=="browser"){return new Date(a)}else{if(!b.timezone||b.timezone=="utc"){return n(new Date(a))}else{if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var c=new timezoneJS.Date();c.setTimezone(b.timezone);c.setTime(a);return c}else{return n(new Date(a))}}}}var t={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,quarter:3*30*24*60*60*1000,year:365.2425*24*60*60*1000};var q=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]];var u=q.concat([[3,"month"],[6,"month"],[1,"year"]]);var s=q.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(a){a.hooks.processOptions.push(function(c,b){v.each(c.getAxes(),function(d,f){var e=f.options;if(e.mode=="time"){f.tickGenerator=function(L){var h=[];var i=r(L.min,e);var Q=0;var P=(e.tickSize&&e.tickSize[1]==="quarter")||(e.minTickSize&&e.minTickSize[1]==="quarter")?s:u;if(e.minTickSize!=null){if(typeof e.tickSize=="number"){Q=e.tickSize}else{Q=e.minTickSize[0]*t[e.minTickSize[1]]}}for(var j=0;j<P.length-1;++j){if(L.delta<(P[j][0]*t[P[j][1]]+P[j+1][0]*t[P[j+1][1]])/2&&P[j][0]*t[P[j][1]]>=Q){break}}var N=P[j][0];var U=P[j][1];if(U=="year"){if(e.minTickSize!=null&&e.minTickSize[1]=="year"){N=Math.floor(e.minTickSize[0])}else{var T=Math.pow(10,Math.floor(Math.log(L.delta/t.year)/Math.LN10));var g=(L.delta/t.year)/T;if(g<1.5){N=1}else{if(g<3){N=2}else{if(g<7.5){N=5}else{N=10}}}N*=T}if(N<1){N=1}}L.tickSize=e.tickSize||[N,U];var k=L.tickSize[0];U=L.tickSize[1];var M=k*t[U];if(U=="second"){i.setSeconds(p(i.getSeconds(),k))}else{if(U=="minute"){i.setMinutes(p(i.getMinutes(),k))}else{if(U=="hour"){i.setHours(p(i.getHours(),k))}else{if(U=="month"){i.setMonth(p(i.getMonth(),k))}else{if(U=="quarter"){i.setMonth(3*p(i.getMonth()/3,k))}else{if(U=="year"){i.setFullYear(p(i.getFullYear(),k))}}}}}}i.setMilliseconds(0);if(M>=t.minute){i.setSeconds(0)}if(M>=t.hour){i.setMinutes(0)}if(M>=t.day){i.setHours(0)}if(M>=t.day*4){i.setDate(1)}if(M>=t.month*2){i.setMonth(p(i.getMonth(),3))}if(M>=t.quarter*2){i.setMonth(p(i.getMonth(),6))}if(M>=t.year){i.setMonth(0)}var O=0;var S=Number.NaN;var K;do{K=S;S=i.getTime();h.push(S);if(U=="month"||U=="quarter"){if(k<1){i.setDate(1);var R=i.getTime();i.setMonth(i.getMonth()+(U=="quarter"?3:1));var J=i.getTime();i.setTime(S+O*t.hour+(J-R)*k);O=i.getHours();i.setHours(0)}else{i.setMonth(i.getMonth()+k*(U=="quarter"?3:1))}}else{if(U=="year"){i.setFullYear(i.getFullYear()+k)}else{i.setTime(S+M)}}}while(S<L.max&&S!=K);return h};f.tickFormatter=function(D,H){var F=r(D,H.options);if(e.timeformat!=null){return m(F,e.timeformat,e.monthNames,e.dayNames)}var h=(H.options.tickSize&&H.options.tickSize[1]=="quarter")||(H.options.minTickSize&&H.options.minTickSize[1]=="quarter");var i=H.tickSize[0]*t[H.tickSize[1]];var E=H.max-H.min;var j=(e.twelveHourClock)?" %p":"";var k=(e.twelveHourClock)?"%I":"%H";var g;if(i<t.minute){g=k+":%M:%S"+j}else{if(i<t.day){if(E<2*t.day){g=k+":%M"+j}else{g="%b %d "+k+":%M"+j}}else{if(i<t.month){g="%b %d"}else{if((h&&i<t.quarter)||(!h&&i<t.year)){if(E<t.year){g="%b"}else{g="%b %Y"}}else{if(h&&i<t.year){if(E<t.year){g="Q%q"}else{g="Q%q %Y"}}else{g="%Y"}}}}}var G=m(F,g,e.monthNames,e.dayNames);return G}}})})}v.plot.plugins.push({init:o,options:l,name:"time",version:"1.0"});v.plot.formatDate=m})(jQuery);